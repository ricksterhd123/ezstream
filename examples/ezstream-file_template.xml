<?xml version="1.0" encoding="UTF-8"?>

<!--
  EXAMPLE: Ogg Vorbis playlist stream with reencoding for use with
           ezstream-file.sh(1)

  This example streams a playlist generated by ezstream-file.sh(1) and
  reencodes to Ogg Vorbis.
  -->

<ezstream>

  <servers>
    <server>
      <hostname>127.0.0.1</hostname>
      <port>8000</port>
      <password>hackme</password>
    </server>
  </servers>

  <streams>
    <stream>
      <mountpoint>/stream.ogg</mountpoint>
      <format>Ogg</format>
      <encoder>OggEnc-Q1.5</encoder>
    </stream>
  </streams>

  <intakes>
    <intake>
      <filename>%FILENAME%</filename>
    </intake>
  </intakes>

  <decoders>
    <decoder>
      <name>OggDec</name>
      <program>oggdec -R -b 16 -o - @T@</program>
      <file_ext>.ogg</file_ext>
      <file_ext>.oga</file_ext>
    </decoder>

    <decoder>
      <name>MadPlay</name>
      <program>madplay -b 16 -R 44100 -S -o raw:- @T@</program>
      <file_ext>.mp3</file_ext>
    </decoder>

    <decoder>
      <name>Flac</name>
      <program>flac -s -d --force-raw-format --sign=signed --endian=little -o - @T@</program>
      <file_ext>.flac</file_ext>
    </decoder>

    <decoder>
      <name>AAC</name>
      <program>faad -d -f 2 -w @T@</program>
      <file_ext>.m4a</file_ext>
    </decoder>

    <decoder>
      <name>Opus</name>
      <program>opusdec --rate 44100 @T@ -</program>
      <file_ext>.opus</file_ext>
    </decoder>
  </decoders>

  <encoders>
    <encoder>
      <name>OggEnc-Q1.5</name>
      <format>Ogg</format>
      <program>oggenc -r -B 16 -C 2 -R 44100 --raw-endianness 0 -q 1.5 -t @M@ -</program>
    </encoder>

    <encoder>
      <name>Opus-VBR96</name>
      <format>Ogg</format>
      <program>opusenc --vbr --bitrate 96 --title @t@ --artist @a@ --raw --raw-rate 44100 - -</program>
    </encoder>

    <encoder>
      <name>Lame-CBR128</name>
      <format>MP3</format>
      <program>lame --preset cbr 128 -r -s 44.1 --bitwidth 16 - -</program>
    </encoder>
  </encoders>

</ezstream>
